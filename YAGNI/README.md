# YAGNI üö´

–†–∞–∑–¥–µ–ª –æ –ø—Ä–∏–Ω—Ü–∏–ø–µ YAGNI (You Aren't Gonna Need It) ‚Äî –Ω–µ –ø–∏—Å–∞—Ç—å –∫–æ–¥ "–ø—Ä–æ –∑–∞–ø–∞—Å". –ï—Å–ª–∏ —Ñ–∏—á–∏ –Ω–µ—Ç –≤ —Ç–µ–∫—É—â–µ–º –¢–ó, –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ —Ç—Ä–∞—Ç—è—Ç –≤—Ä–µ–º—è –∏ —É—Å–ª–æ–∂–Ω—è—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É. –ì–æ—Ä–∞–∑–¥–æ –¥–µ—à–µ–≤–ª–µ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –æ–Ω–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ.

## –ü–æ—á–µ–º—É "–ø—Ä–æ –∑–∞–ø–∞—Å" ‚Äî –ø–ª–æ—Ö–æ ‚ö†Ô∏è
- –õ–∏—à–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∏ —É—Å–ª–æ–∂–Ω—è—é—Ç –æ—Ç–ª–∞–¥–∫—É.
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–¥ —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —Ö–æ—Ç—è –Ω–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–∏.
- –†–µ–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π, –∏ –∑–∞—Ä–∞–Ω–µ–µ —Å–¥–µ–ª–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–µ—à–∞–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏.

## –ö–æ–≥–¥–∞ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –æ–ø—Ä–∞–≤–¥–∞–Ω—ã ‚úÖ
- –ï—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏.
- –£–∂–µ –µ—Å—Ç—å –≤—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –Ω–µ–π.
- –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–µ–π—á–∞—Å –≤—ã—à–µ, —á–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è.

## –ó–∞–ø–∞—Ö–∏ –∫–æ–¥–∞ üëÉ
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å –æ–¥–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π "–Ω–∞ –±—É–¥—É—â–µ–µ".
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

## –ë—ã–ª–æ (–ü–ª–æ—Ö–æ) ‚ùå

–ó–∞–¥–∞—á–∞: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ù–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞—Ä–∞–Ω–µ–µ –¥–µ–ª–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è S3, —Ö–æ—Ç—è –∫–ª—é—á–µ–π AWS –Ω–µ—Ç –∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–∏—Å–∫.

```php
<?php

declare(strict_types=1);

interface StorageInterface
{
    public function put(string $path, string $contents): void;
}

final class LocalStorage implements StorageInterface
{
    public function __construct(private string $basePath)
    {
    }

    public function put(string $path, string $contents): void
    {
        $fullPath = rtrim($this->basePath, '/').'/'.ltrim($path, '/');
        $dir = dirname($fullPath);

        if (!is_dir($dir)) {
            mkdir($dir, 0775, true);
        }

        file_put_contents($fullPath, $contents);
    }
}

final class S3Storage implements StorageInterface
{
    public function __construct(
        private string $bucket,
        private string $accessKey,
        private string $secretKey,
    ) {
    }

    public function put(string $path, string $contents): void
    {
        throw new RuntimeException('S3 –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω');
    }
}

final class AvatarUploader
{
    public function __construct(private StorageInterface $storage)
    {
    }

    public function upload(int $userId, string $contents, string $extension): string
    {
        $path = "avatars/{$userId}.{$extension}";
        $this->storage->put($path, $contents);

        return $path;
    }
}
```

## –°—Ç–∞–ª–æ (–•–æ—Ä–æ—à–æ) ‚úÖ

–ù—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–∏—Å–∫ ‚Äî –∑–Ω–∞—á–∏—Ç –¥–µ–ª–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –±–µ–∑ –ª–∏—à–Ω–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

```php
<?php

declare(strict_types=1);

final class AvatarUploader
{
    public function __construct(private string $basePath)
    {
    }

    public function upload(int $userId, string $contents, string $extension): string
    {
        $path = "avatars/{$userId}.{$extension}";
        $fullPath = rtrim($this->basePath, '/').'/'.ltrim($path, '/');
        $dir = dirname($fullPath);

        if (!is_dir($dir)) {
            mkdir($dir, 0775, true);
        }

        file_put_contents($fullPath, $contents);

        return $path;
    }
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞ ‚ñ∂Ô∏è

```bash
php YAGNI/Examples/bad.php
php YAGNI/Examples/good.php
```
