# Composition Over Inheritance üß±

## –ü—Ä–æ–±–ª–µ–º–∞ –≥–ª—É–±–æ–∫–∏—Ö –∏–µ—Ä–∞—Ä—Ö–∏–π üåÄ
–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞—ë—Ç –∂—ë—Å—Ç–∫—É—é —Ü–µ–ø–æ—á–∫—É: `BaseRepository` ‚Üí `EloquentRepository` ‚Üí `CachedRepository` ‚Üí `LoggedCachedRepository`. –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `BaseRepository` –ª–æ–º–∞–µ—Ç –≤–µ—Å—å —Å—Ç–µ–∫, –∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤—ã—Ç—è–≥–∏–≤–∞–µ—Ç –µ—â—ë –æ–¥–∏–Ω –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π.

## –ü—Ä–∞–≤–∏–ª–æ ‚úÖ
–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π `has-a` (–≤–Ω–µ–¥—Ä–∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å) –≤–º–µ—Å—Ç–æ `is-a` (–Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è). –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —á–∞—Å—Ç–µ–π, –∞ –Ω–µ —Å—Ç—Ä–æ–∏—Ç—å –≤—Å—ë –Ω–∞ –µ–¥–∏–Ω–æ–º —Ä–æ–¥–∏—Ç–µ–ª–µ.

## –ó–∞–ø–∞—Ö–∏ –∫–æ–¥–∞ ü§¢
- –ö–ª–∞—Å—Å—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è —Ä–∞–¥–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –∞ –Ω–µ —Ä–∞–¥–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è ¬´—è–≤–ª—è–µ—Ç—Å—è¬ª. –¢–æ–≥–¥–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∫—Ä—ã—Ç–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π.
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ª–æ–º–∞–µ—Ç –µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç: –¥–æ—á–µ—Ä–Ω–∏–π –∫–ª–∞—Å—Å –º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ.
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –≤—Å–µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω—É–∂–µ–Ω –ª–æ–≥, –Ω–æ —Ö–∏—Ç—Ä–æ—Å—Ç—å –≤ –±–∞–±—É—à–∫–µ-–∫–ª–∞—Å—Å–µ).

## ‚ùå –ë—ã–ª–æ (–ü–ª–æ—Ö–æ)
```php
class PremiumUser extends User
{
    public function getPrice(): Money
    {
        return $this->basePrice->multiply(0.8);
    }
}
```
–î–æ–±–∞–≤–∏–ª–∏ —Å–∫–∏–¥–∫—É —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –ß—Ç–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω `CorporatePremiumUser` —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π? PHP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏–¥—ë—Ç—Å—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏–ª–∏ —Å—Ç—Ä–æ–∏—Ç—å –≥–ª—É–±–æ–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é.

## ‚úÖ –°—Ç–∞–ª–æ (–•–æ—Ä–æ—à–æ)
```php
final class User
{
    public function __construct(private PricingStrategyInterface $pricing) {}

    public function getPrice(): Money
    {
        return $this->pricing->calculate($this->basePrice);
    }
}
```
`User` –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–∞—Å—á—ë—Ç–∞ —Ü–µ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ù–æ–≤—ã–µ —Ç–∏–ø—ã —Ä–∞—Å—á—ë—Ç–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∞–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ö–æ–≥–¥–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —É–º–µ—Å—Ç–Ω–æ üìê
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å —Å —à–∞–±–ª–æ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –±–∞–∑—É, –Ω–æ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–ª–∞—Å—Å—ã –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–æ–±–ª—é–¥–∞—é—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –¢–æ–≥–¥–∞ –≤—ã –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç–µ—Å—å —Ä–∞–¥–∏ –∫–æ–¥–∞, –∞ —Ä–∞–¥–∏ –æ–±—â–µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

## –ú–∏–Ω–∏-—á–µ–∫–ª–∏—Å—Ç üîé
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ: –≤—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–æ–¥?
- –ï—Å–ª–∏ –º–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å ‚Äî –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ.
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ —Å —á—ë—Ç–∫–∏–º —à–∞–±–ª–æ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º.
