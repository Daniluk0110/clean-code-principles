# Refactoring Kata üßπ

## –ü—Ä–∞–≤–∏–ª–∞ Kata üîÑ
1. –ü—Ä–æ—á—Ç–∏ –∑–∞–¥–∞–Ω–∏–µ –∏ –æ—Ç–∫—Ä–æ–π `dirty/` ‚Äî —Ç–∞–º –º–æ–Ω—Å—Ç—Ä-–∫–ª–∞—Å—Å —Å –Ω–∞—Ä—É—à–µ–Ω–∏—è–º–∏.
2. –ü–æ–ø—Ä–æ–±—É–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å: –ø—Ä–∏–º–µ–Ω—è–π –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—Ä–∞–≤–Ω–∏ —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ —Å –≤–µ—Ç–∫–æ–π `solution`.
4. –û—Ç–º–µ—Ç—å, –∫–∞–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è —É–¥–∞–ª–æ—Å—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –∫–∞–∫–∏–µ –µ—â—ë –æ—Å—Ç–∞–ª–∏—Å—å.

## –ë–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á–∞ üè¨
–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥, —Å—á–∏—Ç–∞–µ—Ç —Å–∫–∏–¥–∫–∏ –∏ –ù–î–°, —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î. –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –∞–¥—Ä–µ—Å, email, –∫–æ—Ä–∑–∏–Ω–∞ –∏ —Ç–∏–ø –¥–æ—Å—Ç–∞–≤–∫–∏.

## –ß—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–æ
| –ù–∞—Ä—É—à–µ–Ω–∏–µ | –ü—Ä–∏–Ω—Ü–∏–ø |
| --- | --- |
| –î–ª–∏–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–µ–ª–∞–µ—Ç –≤—Å—ë –ø–æ–¥—Ä—è–¥ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å–∫–∏–¥–∫–∏, –ù–î–°, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ) | SRP, CQS |
| –†–∞–±–æ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é —Å —Å—ã—Ä—ã–º –º–∞—Å—Å–∏–≤–æ–º (–±–µ–∑ DTO/Value Objects) | YAGNI, Value Objects |
| –ñ—ë—Å—Ç–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ MySQLConnection –∏ SmtpMailer –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ | DIP |
| –†–∞—Å—á—ë—Ç —Å–∫–∏–¥–∫–∏ –∏ –ù–î–° –≤ –æ–¥–Ω–æ–º –º–µ—Ç–æ–¥–µ | DRY, SRP |
| Switch –ø–æ —Ç–∏–ø—É –¥–æ—Å—Ç–∞–≤–∫–∏ –≤–º–µ—Å—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è | OCP |
| –¶–µ–ø–æ—á–∫–∞ `$data['user']['address']['city']` –∏ –ø–æ—Ö–æ–∂–∏–µ | Law of Demeter |
| –ú–µ—Ç–æ–¥ `processOrder()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç/–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç | CQS |
| –ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –±–µ–∑ guard clauses | Early-Exit |
| –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ 0.2, 0.18, 1000 –±–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç/–æ–±—ä—è—Å–Ω–µ–Ω–∏–π | KISS |
| –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å `// old logic` | YAGNI |
| –ù–µ—è—Å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `$d`, `$res`, `$tmp`, `$x` | Naming |

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ ‚úÖ
- –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –Ω–µ—Å—ë—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.
- –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ —Å–∫–∏–¥–∫–∏ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è.
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (DIP).
- Guard Clauses —Å–Ω–∏–º–∞—é—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (Early-Exit).
- –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ DTO/Value Objects.
- –î–µ–Ω—å–≥–∏ –∏ email –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ Value Objects –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ `Value-Objects`.
- –ù–µ—Ç —Ü–µ–ø–æ—á–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –≤—Ä–æ–¥–µ `$a['b']['c']` ‚Äî –ø–æ–ª—å–∑—É–π—Å—è explicit data.
- –ú–µ—Ç–æ–¥—ã –ª–∏–±–æ –∫–æ–º–∞–Ω–¥—ã, –ª–∏–±–æ –∑–∞–ø—Ä–æ—Å—ã (CQS), –∏ –≤ –Ω–∏—Ö –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π (KISS).
